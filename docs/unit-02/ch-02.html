
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Entities Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="ch-03.html" />
    
    
    <link rel="prev" href="ch-01.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    BookBrainz
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../unit-01/">
            
                <a href="../unit-01/">
            
                    
                    Introduction
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.2.1" data-path="../unit-01/ch01.html">
            
                <a href="../unit-01/ch01.html">
            
                    
                    About BookBrainz
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.2" data-path="../unit-01/ch02.html">
            
                <a href="../unit-01/ch02.html">
            
                    
                    Our Story
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2.3" data-path="../unit-01/ch03.html">
            
                <a href="../unit-01/ch03.html">
            
                    
                    How we operate
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="./">
            
                <a href="./">
            
                    
                    DevDocs
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="ch-01.html">
            
                <a href="ch-01.html">
            
                    
                    BookBrainz Schema
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.3.2" data-path="ch-02.html">
            
                <a href="ch-02.html">
            
                    
                    Entities
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="ch-03.html">
            
                <a href="ch-03.html">
            
                    
                    Coming from MusicBrainz
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Entities</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="entities">Entities</h1>
<p>In BookBrainz, an entity is a container for some data, associated with some globally unique identifiers (GIDs). BookBrainz represents a number of different objects as entities, and each of these has its own particular associated data. In the following section, we&#x2019;ll go through the database structures used to represent entities, and talk about each type of entity in more detail.</p>
<h2 id="generic-entity-tables">Generic Entity Tables</h2>
<h3 id="entity-and-entity-redirect">Entity and Entity Redirect</h3>
<p>All entity GIDs are stored in a single table in the database, entity.</p>
<p>A second table, <strong>entity_redirect</strong>, allows redirection of GIDs. For example, if one entity was merged into a second entity, then a row would be created in the <strong>entity_redirect</strong> table to indicate a mapping to the merge target.</p>
<p>Entities in BookBrainz are versioned, which means that the entire entity history is stored in the database. To make this possible, we have an additional table in the database, called <strong>entity_tree</strong>.</p>
<div style="text-align: center">
    <img alt="The entity table and its relationships" src="images/entity_table.png">
    <p> <b> The entity table and its relationships. </b> </p>
</div>

<h3 id="entity-tree">Entity Tree</h3>
<p>The <strong>entity_tree</strong> table is the place where information is actually stored. You can think of this table like a folder on a computer. It points to the various bits of data related to a particular version of the entity. For example, the most recent annotation ID, disambiguation comment ID and entity-specific data ID will usually be stored at this level.</p>
<p>When a new version of an entity is created, a corresponding row in <strong>entity_tree</strong> is created, which will indicate that data was updated by modifying one of the stored IDs.</p>
<div style="text-align: center">
    <img alt="The entity_tree table and its relationships." src="images/entity_tree.png">
    <p> <b> The entity_tree table and its relationships. </b> </p>
</div>

<h3 id="entity-data">Entity Data</h3>
<p>Each entity tree will point to a particular row in the <strong>entity_data</strong> table. We use joined table inheritance to represent the different entities in BookBrainz, and this single <strong>entity_data</strong> table represent the base object in this inheritance hierarchy. It contains an ID and a field to determine the type of entity data stored, known as the discriminator.</p>
<div style="text-align: center">
    <img alt="The entity_data table and its relationships." src="images/entity_data.png">
    <p> <b> The entity_data table and its relationships. </b> </p>
</div>


<h3 id="additional-tables">Additional Tables</h3>
<p>There are some additional tables related to all types of entity. We&#x2019;ve already mentioned annotations and disambiguations, so let&#x2019;s talk a little more about those.</p>
<p>An annotation is a way of making notes about an entity, for other editors to read. It stores some content associated with an ID. Disambiguation comments, stored in the disambiguation table, have a similar data structure but are intended to contain a short description to allow editors to easily differentiate between similarly-named entities.</p>
<p>An alias represents a name or title. Each alias will store some text along with a language, and a couple of flags to indicate whether the alias is primary and whether it is native. An entity can only have one native alias, which indicates its original name. It can have many primary aliases, which give the most common names in particular languages. Native aliases will usually also be primary.</p>
<h2 id="specific-entities">Specific Entities</h2>
<p>Publication
Publications represent the books, magazines, articles, newspapers, novels and other published materials catalogued in BookBrainz. The table publication_data stores the entity specific data for publications, and represents an object derived from <strong>entity_data</strong>.</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="ch-01.html" class="navigation navigation-prev " aria-label="Previous page: BookBrainz Schema">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="ch-03.html" class="navigation navigation-next " aria-label="Next page: Coming from MusicBrainz">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Entities","level":"1.3.2","depth":2,"next":{"title":"Coming from MusicBrainz","level":"1.3.3","depth":2,"path":"unit-02/ch-03.md","ref":"unit-02/ch-03.md","articles":[]},"previous":{"title":"BookBrainz Schema","level":"1.3.1","depth":2,"path":"unit-02/ch-01.md","ref":"unit-02/ch-01.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":["expandable-chapters"],"pluginsConfig":{"expandable-chapters":{},"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"unit-02/ch-02.md","mtime":"2018-03-19T12:24:54.322Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-03-19T12:37:05.702Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

